<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:k="http://java.sun.com/jsf/composite/kinocomp">

<ui:composition template="template.xhtml">
	<ui:define name="content">
	
	<h:form>
		<table class="table table-striped">
			<thead>
		      <tr>
		        <th>#{msg.programm_lbl_film}</th>
		        <th>#{msg.programm_lbl_language}</th>
			    <th>#{msg.programm_lbl_saal}</th>
		        <c:forEach items="#{movieEventController.dates}" var="eventDate">
		        	<th><h:outputText value="#{eventDate}" converter="localDateTimeConverter"/></th>
		        </c:forEach>
		        <!-- <th>Sa 06.01</th>
		        <th>So 07.01</th>
		        <th>Mo 08.01</th>
		        <th>Di 09.01</th>
		        <th>Mi 10.01</th>
		        <th>Do 11.01</th>
		        <th>Fr 12.01</th> -->
		      </tr>
		    </thead>
		    <tbody>
				<c:forEach items="#{movieEventController.events}" var="event">
				  <tr>
				  	<td>
				  		<h:commandLink action="#{movieEventController.showMovieDetail(event)}">
				  			<h:outputText value="#{event.movie.title}"/>
				  		</h:commandLink>
				  	</td>
				  	<td>
					  	<c:forEach items="#{event.details}" var="detail">
					  		<h:outputText value="#{detail.language}"/><br></br>
					  	</c:forEach>
				  	</td>
				  	<td>
					  	<c:forEach items="#{event.details}" var="detail">
					  		<h:outputText value="#{detail.hall}"/><br></br>
					  	</c:forEach>
				  	</td>
				  	<c:forEach items="#{movieEventController.dates}" var="eventDate">
				  		<td>
						  	<c:forEach items="#{event.details}" var="detail">
						  		<c:forEach items="#{detail.eventDateTimes}" var="eventDateTime">
						  			<c:if test="${eventDateTime.showDate eq eventDate}">
						  				<h:commandLink action="#{movieEventController.selectEvent(event, detail, eventDateTime)}">
						  					<h:outputText value="#{eventDateTime.showTime}"/>
						  				</h:commandLink>
						  				<br></br>
						  			</c:if>
						  		</c:forEach>
						  	</c:forEach>
				  		</td>
				  	</c:forEach>
				  </tr>
				</c:forEach>
		    </tbody>
		</table>				  
	</h:form>
	
		<k:sessionOver></k:sessionOver>

		<h:form>
			<h:commandLink value="moviedetail" action="moviedetail" />
			<h:commandLink value="sessionOver" onclick="sessionOverDialog.show()" />
		</h:form>



	</ui:define>


</ui:composition>
</html>